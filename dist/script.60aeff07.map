{"version":3,"sources":["src/script.js"],"names":["options","Options","play_audio","font_size","line_height","container","document","getElementById","container_origin","Vector","container_scale","container_offset","canvas_offset","textCanvas","textCtx","getContext","alpha","cursorCanvas","cursorCtx","cursorInput","keypress_audio","window","makeMultiAudio","newline_audio","IS_IOS","navigator","userAgent","match","DEVICE_PIXEL_RATIO","devicePixelRatio","TEXT_COLOR","CURSOR_COLOR","GLOBAL_ALPHA","ALPHA_MARGIN","ROTATE_MARGIN","TRANSLATE_MARGIN","chars","letter_size","parseInt","Math","min","innerWidth","letter_width","padding_vec","_x","_y","innerHeight","pos_vec","stamp_key","events_key","stamp","i","obj","DOMEvent","getId","type","fn","context","on","id","apply","arguments","handler","e","call","event","addEventListener","attachEvent","off","removeEventListener","detachEvent","Cursor","_cursor_timeout","_raf","_time","_opacity","clear","_pos","subtract","divideBy","clearRect","x","y","update","vec","style","left","top","draw","_draw","fillRect","clearTimeout","cancelAnimationFrame","setTimeout","fadeOut","bind","nudge","add","multiplyBy","moveleft","moveright","moveup","movedown","addtab","newline","Date","requestAnimationFrame","_fadeanim","dt","new_opacity","save","globalAlpha","restore","NAV_BUTTONS","NO_AUDIO","ENTER","TypeWriter","addCharacter","char_str","len","length","char","push","Character","redraw","asyncForLoop","process_fn","resetCanvases","forEach","ctx","canvas","setTransform","width","height","scale","font","textBaseline","fillStyle","reposition","_add","reset","setAttribute","focus","App","mouseuptimeout","mousemovedelay","mousedowntime","clickdelay","original_pos","zoom_distance","zoom_scale","zoom_center_diff","splash_elem","display_val","display","running","start","events","forceSpace","stop","splash","removeMoveEvent","splash_events","fnc","_onoff","onoff","document_events","mouseup","touchend","mousedown","touchstart","cursor_events","keydown","keyup","key","iosTouchStart","no_audio","which","play","preventDefault","nav","value","substr","_position","getPositionFromEvent","_subtract","updateCursor","touches","changedTouches","clientX","clientY","button","mousemove","letter_offset","_newpos","prototype","get","axis","vector","undefined","num","_divideBy","_multiplyBy","distanceTo","diff","sqrt","randMargin","str","rotate","Object","create","translate","fillText","shake","startWatch","notification","confirm","hash","location","sendEvent","pasteText","section2","section3","paste_cancel","form","pastetext","text","pasted","lines","split","item","classList","remove","args","Array","slice","console","log","ga","concat","touch","src","instances","output","current","Audio","audio","currentTime","randRange","max","random","margin","arr","cb_fn","loop_finished","callee"],"mappings":"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","file":"script.60aeff07.map","sourceRoot":"..","sourcesContent":["/*\n*\n* Inspired by a girl, Ms. Jayme Bergman\n*\n*/\n\nvar options = (function () {\n        function Options () {\n            /*\n            todo: build a GUI for these options\n            */\n            this.play_audio = true;\n            this.font_size = 26;\n            this.line_height = null;\n        }\n\n        return new Options();\n    })(),  \n    container = document.getElementById('container'),\n    container_origin = new Vector(0,0),\n    container_scale = 1,\n    container_offset = new Vector(0,0),\n    canvas_offset = new Vector(0, 0),\n    textCanvas = document.getElementById('text-canvas'),\n    textCtx = textCanvas.getContext('2d', {alpha:true}),\n    cursorCanvas = document.getElementById('cursor-canvas'),\n    cursorCtx = cursorCanvas.getContext('2d'),\n    cursorInput = document.getElementById('cursor-input'),\n    keypress_audio = window.keypress_audio || new makeMultiAudio('/assets/keypress.mp3', 5),\n    newline_audio = window.newline_audio || new makeMultiAudio('/assets/return.mp3', 2),\n    IS_IOS = navigator.userAgent.match(/(iPad|iPhone|iPod)/g),\n    DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1,\n    TEXT_COLOR = '#150904',\n    CURSOR_COLOR = '#4787ea',\n    GLOBAL_ALPHA = 0.72,\n    ALPHA_MARGIN = 0.06,\n    ROTATE_MARGIN = 0.05,\n    TRANSLATE_MARGIN = 0.2,\n    chars = [],\n    letter_size = parseInt(Math.min(options.font_size, window.innerWidth / 17)),\n    letter_width = letter_size * 12 / 20,\n    line_height = (options.line_height === null) ? letter_size + 8 : options.line_height,\n    padding_vec = (function () {\n        var _x = Math.min(100, window.innerWidth / 8),\n            _y = Math.min(_x, window.innerHeight / 8);\n        return new Vector(_x, _y);\n    })(),\n    pos_vec = padding_vec,\n    stamp_key = 'tws_stamp',\n    events_key = 'tws_event',\n    stamp = (function () {\n        var i = 0;\n        return function stamp (obj) {\n            if (!obj[stamp_key]) {\n                obj[stamp_key] = ++i;\n            }\n            return obj[stamp_key];\n        };\n    })(),\n    DOMEvent = (function () {\n        function DOMEvent () {\n            // Inspired by LeafletJS\n            // todo: better backwards compatibility\n\n            this.getId = function (obj, type, fn, context) {\n                return type + stamp(fn) + (context ? '_' + stamp(context) : '');\n            };\n\n            this.on = function (obj, type, fn, context) {\n                var id = this.getId.apply(this, arguments),\n                    handler = function (e) {\n                        return fn.call(context || obj, e || window.event);\n                    };\n\n                if (!obj) return;\n\n                if ('addEventListener' in obj) {\n                    obj.addEventListener(type, handler);\n                } else if ('attachEvent' in obj) {\n                    obj.attachEvent('on' + type, handler);\n                }\n\n                obj[events_key] = obj[events_key] || {};\n                obj[events_key][id] = handler;\n            };\n\n            this.off = function (obj, type, fn, context) {\n                var id = this.getId.apply(this, [obj, type, fn, context]),\n                    handler = obj[events_key] && obj[events_key][id];\n\n                if (!obj) return;\n\n                if ('removeEventListener' in obj) {\n                    obj.removeEventListener(type, handler);\n                } else if ('detachEvent' in obj) {\n                    obj.detachEvent('on' + type, handler);\n                }\n\n                obj[events_key][id] = null;\n            };\n        }\n        return new DOMEvent();\n    })(),\n    Cursor = (function () {\n        function Cursor () {\n            /*\n            Cursor singleton for controlling cursor \n            position and visibility\n            */\n            var _cursor_timeout,\n                _raf,\n                _time,\n                _opacity;\n\n            this.clear = function () {\n                var _pos = pos_vec.subtract(1).divideBy(container_scale);\n\n                cursorCtx.clearRect(_pos.x, _pos.y, letter_width + 2, line_height + 2);\n            };\n\n            this.update = function (vec) {\n                this.clear();\n                \n                pos_vec = vec;\n                cursorInput.style.left = Math.min(vec.x, window.innerWidth) + 'px';\n                cursorInput.style.top = Math.min(vec.y, window.innerHeight) + 'px';\n                this.draw();\n            };\n\n            this._draw = function () {\n                var _pos = pos_vec.divideBy(container_scale);\n\n                cursorCtx.fillRect(_pos.x, _pos.y, letter_width, line_height);\n            };\n\n            this.draw = function () {\n                this._draw();\n                \n                window.clearTimeout(_cursor_timeout);\n                if (_raf) {\n                    window.cancelAnimationFrame(_raf);\n                }\n                _opacity = GLOBAL_ALPHA;\n                _cursor_timeout = window.setTimeout(this.fadeOut.bind(this), 2200);\n            };\n\n            this.nudge = function (vec) {\n                this.update( pos_vec.add(vec.multiplyBy(container_scale)) );\n            };\n\n            this.moveleft = function () {\n                this.nudge(new Vector(-letter_width, 0));\n            };\n            this.moveright = function () {\n                this.nudge(new Vector(letter_width, 0));\n            };\n            this.moveup = function () {\n                this.nudge(new Vector(0, -line_height));\n            };\n            this.movedown = function () {\n                this.nudge(new Vector(0, line_height));\n            };\n            this.addtab = function () {\n                this.nudge(new Vector(letter_width * 4, 0));\n            };\n            \n            this.newline = function () {\n                /*\n                todo: newline might be better off\n                moving to x = previous click location\n                instead of paddingx\n                */\n                this.update(new Vector(padding_vec.x, pos_vec.y + line_height));\n            };\n\n            this.fadeOut = function () {\n                _time = new Date();\n                _raf = window.requestAnimationFrame( this._fadeanim.bind(this) );\n            };\n\n            this._fadeanim = function () {\n                var dt = new Date() - _time,\n                    new_opacity = _opacity - 0.1 * dt / 300;\n\n                if (new_opacity <= 0) {\n                    this.clear();\n                } else {\n                    cursorCtx.save();\n                    this.clear();\n                    _opacity = new_opacity;\n                    cursorCtx.globalAlpha = _opacity;\n                    this._draw();\n                    cursorCtx.restore();\n                    _raf = window.requestAnimationFrame( this._fadeanim.bind(this) );\n                }\n            };\n        }\n\n        return new Cursor();\n    })(),\n    // mapping for keys that move cursor \n    NAV_BUTTONS = {\n        8: Cursor.moveleft.bind( Cursor ),\n        9: Cursor.addtab.bind( Cursor ),\n        37: Cursor.moveleft.bind( Cursor ),\n        38: Cursor.moveup.bind( Cursor ),\n        39: Cursor.moveright.bind( Cursor ),\n        40: Cursor.movedown.bind( Cursor ),\n        13: Cursor.newline.bind( Cursor ),\n    },\n    // mapping for soundless keys\n    NO_AUDIO = {\n        0 : 'PRTSCR',\n        8 : 'BACKSPACE',\n        9 : 'TAB',\n        16 : 'SHIFT',\n        17 : 'CTRL',\n        18 : 'ALT',\n        20 : 'CAPSLOCK',\n        27 : 'ESC',\n        32 : 'SPACE',\n        33 : 'PGUP',\n        34 : 'PGDN',\n        35 : 'END',\n        36 : 'HOME',\n        37 : 'LEFT',\n        38 : 'UP',\n        39 : 'RIGHT',\n        40 : 'DOWN',\n        45 : 'INSERT',\n        46 : 'DEL',\n        115 : 'F4',\n        117 : 'F6',\n        119 : 'F8',\n        120 : 'F9',\n        121 : 'F10',\n        123 : 'F12'\n    },\n    ENTER = 13,\n    TypeWriter = (function () {\n        function TypeWriter () {\n            /*\n            TypeWriter singleton for handling characters\n            and global positioning system (GPS, ya know)\n            */\n            this.addCharacter = function (char_str, _x, _y) {\n                if (_x && _y) {\n                    Cursor.update( new Vector(_x, _y));\n                }\n                for (var i = 0, len = char_str.length; i < len; i++) {\n                    var char = char_str[i];\n                   \n                    chars.push( new Character( char ) );\n                    Cursor.moveright();\n                }\n            };\n\n            this.redraw = function () {\n                /*\n                pure redraw (no resetting/clearing)\n                */\n                asyncForLoop(chars, process_fn);\n\n                function process_fn (char) {\n                    char.draw();\n                }\n            };\n\n            this.resetCanvases = function () {\n                [textCtx, cursorCtx].forEach(function (ctx) {\n                    var canvas = ctx.canvas;\n\n                    ctx.setTransform(1,0,0,1,0,0);\n\n                    canvas.width = window.innerWidth * DEVICE_PIXEL_RATIO;\n                    canvas.height = window.innerHeight * DEVICE_PIXEL_RATIO;\n                    canvas.style.width = window.innerWidth + 'px';\n                    canvas.style.height = window.innerHeight + 'px';\n\n                    ctx.scale(DEVICE_PIXEL_RATIO, DEVICE_PIXEL_RATIO);\n\n                    ctx.globalAlpha = GLOBAL_ALPHA;\n                });\n\n                // reset contexts, because resizing wipes them\n                textCtx.font = letter_size + \"px Special Elite, serif\";\n                textCtx.textBaseline = \"top\";\n                textCtx.fillStyle = TEXT_COLOR;\n\n                cursorCtx.fillStyle = CURSOR_COLOR;\n                cursorCtx.scale(container_scale, container_scale);\n            };\n\n            this.reposition = function (vec) {\n                /*\n                offset characters for given x/y\n                useful for moving/dragging\n                useful for redrawing (b/c needs resetting)\n                */\n                canvas_offset._add( vec || new Vector(0, 0) );\n\n                container.style.left = '0px';\n                container.style.top = '0px';\n\n                this.resetCanvases();\n                this.redraw();\n            };\n\n            this.reset = function () {\n                /*\n                back to original blank canvas\n                */\n                chars = [];\n                pos_vec = padding_vec;\n                canvas_offset = new Vector(0, 0);\n                container_origin = new Vector(0, 0);\n                container_scale = 1;\n                container.setAttribute('style', '');\n\n                this.reposition();\n                Cursor.draw();\n                cursorInput.focus();\n            };\n        }\n\n        return new TypeWriter();\n    })(),\n    App = (function () {\n        function App () {\n            var mouseuptimeout, mousemovedelay,\n                mousedowntime, clickdelay,\n                original_pos, zoom_distance,\n                zoom_scale, zoom_center_diff,\n                splash_elem = document.getElementById('splash'),\n                display_val = splash_elem.style.display;\n\n            this.running = false;\n\n            this.reset = function () {\n                mouseuptimeout = 0;\n                mousemovedelay = 150;\n                mousedowntime = 0;\n                clickdelay = 150;\n                original_pos = 0;\n                zoom_distance = 0;\n                zoom_scale = 0;\n                zoom_center_diff = 0;\n            };\n\n            this.start = function () {\n\n                if (this.running) return;\n                \n                this.running = true;\n                this.reset();\n                TypeWriter.reset();\n                this.events('on');\n                cursorInput.focus();\n                forceSpace.call(cursorInput);\n                Cursor.draw();\n\n                splash_elem.style.display = 'none';\n            };\n\n            this.stop = function () {\n                this.splash();\n                if (!this.running) return;\n                this.running = false;\n                \n                // kill events\n                this.events('off');\n                removeMoveEvent();\n            };\n\n            this.splash_events = [];\n\n            this.splash = function () {\n                splash_elem.style.display = display_val;\n\n                // some functions below \n                // should push to this array\n                // to describe tear down events\n                for (var i = 0, len = this.splash_events.length; i < len; i++) {\n                    var fnc = this.splash_events[i];\n                    fnc();\n                }\n            };\n\n            this.events = function (_onoff) {\n                var onoff = _onoff || 'on',\n                    document_events = {\n                        mouseup : mouseup,\n                        touchend : touchend,\n                        mousedown : mousedown,\n                        touchstart : touchstart\n                    },\n                    cursor_events = {\n                        keydown : keydown,\n                        keyup : keyup,\n                        focus : focus\n                    },\n                    key, fnc;\n\n                for (key in document_events) {\n                    fnc = document_events[key];\n                    DOMEvent[onoff](document, key, fnc);\n                }\n\n                for (key in cursor_events) {\n                    fnc = cursor_events[key];\n                    DOMEvent[onoff](cursorInput, key, fnc);\n                }\n\n                if (IS_IOS) {\n                    DOMEvent[onoff](document, 'touchstart', iosTouchStart);\n                }\n            };\n\n            function keydown (e) {\n                /*\n                keydown handles audio\n                */\n                var no_audio = NO_AUDIO[ e.which ];\n\n                if (!no_audio && options.play_audio) {\n                    if (e.which === ENTER) {\n                        newline_audio.play();\n                    } else {\n                        keypress_audio.play();\n                    }\n                    return true;\n                }\n                \n                if (no_audio === 'TAB') {\n                    /* todo : add 2 or 4 spaces */\n\n                    // refocus\n                    window.setTimeout(function () {\n                        cursorInput.focus();\n                    }, 10);\n                    e.preventDefault();\n                }\n            }\n\n            function keyup (e) {\n                /*\n                keyup handles character input and navigation\n                */\n                var nav = NAV_BUTTONS[ e.which ],\n                    value = this.value.substr(1);\n\n                if (!value && !nav) return;\n\n                if (nav) {\n                    nav();\n                } else {\n                    TypeWriter.addCharacter( value );\n                }\n                forceSpace.call(this);\n            }\n\n            function focus () {\n                forceSpace.call(this);\n            }\n\n            function mouseup (e) {\n                removeMoveEvent();\n\n                if (original_pos) {\n                    var _position = getPositionFromEvent(e);\n                    \n                    _position._subtract( original_pos );\n\n                    TypeWriter.reposition( _position );\n                    original_pos = null;\n                } else if (new Date() - mousedowntime <= clickdelay &&\n                    !IS_IOS) {\n                    // click\n                    updateCursor(e);\n                }\n            }\n\n            function touchend (e) {\n                if (!e.touches.length) {\n                    if (e.changedTouches.length) {\n                        e.clientX = e.changedTouches[0].clientX;\n                        e.clientY = e.changedTouches[0].clientY;\n                    } else {\n                        removeMoveEvent();\n                        return;\n                    }\n                }\n\n                return mouseup(e);\n            }\n\n            function mousedown (e) {\n                // ignore right click\n                if (e.button === 2) return;\n\n                // single finger or mouse\n                mousedowntime = new Date();\n\n                mouseuptimeout = window.setTimeout(function () {\n                    \n                    original_pos = original_pos || getPositionFromEvent(e);\n\n                    DOMEvent.on(document, 'mousemove', mousemove);\n                    DOMEvent.on(document, 'touchmove', mousemove);\n                    DOMEvent.on(document, 'mouseup', removeMoveEvent);\n                    \n                }, mousemovedelay);\n            }\n\n            function touchstart (e) {\n                if (e.touches && e.touches.length === 2) {\n                    // todo: work on zooming\n                    e.preventDefault();\n                    return false;\n                } else {\n                    return mousedown(e);\n                }\n            }\n\n            function iosTouchStart (e) {\n                return updateCursor(e);\n            }\n\n            function mousemove (e) {\n                if (!original_pos) return; \n                // move holder\n                var _position = getPositionFromEvent(e);\n\n                _position._subtract( original_pos );\n\n                container.style.left = _position.x + 'px';\n                container.style.top = _position.y + 'px';\n                Cursor.clear();\n            }\n\n            function updateCursor (e) {\n                var _position = getPositionFromEvent(e),\n                    letter_offset = new Vector(letter_width/2, line_height/2),\n                    _newpos = _position.subtract(letter_offset);\n                Cursor.update( _newpos );\n                cursorInput.focus();\n            }\n\n            function removeMoveEvent () {\n                window.clearTimeout( mouseuptimeout );\n                DOMEvent.off(document, 'mousemove', mousemove);\n                DOMEvent.off(document, 'touchmove', mousemove);\n                DOMEvent.off(document, 'mouseup', removeMoveEvent);\n            }\n            /*function getFingerPositions (e) {\n                var touches = e.touches,\n                    touch1 = touches[0],\n                    touch2 = touches[1];\n\n                return [ \n                    new Vector(touch1.clientX, touch1.clientY),\n                    new Vector(touch2.clientX, touch2.clientY)\n                ];\n            }*/\n\n            /*\n            extremely experimental zooming \n            */\n\n            /*function zoomStart (e) {\n                var positions = getFingerPositions(e),\n                    f1 = positions[0],\n                    f2 = positions[1];\n                \n                zoom_distance = f1.distanceTo( f2 );\n                container_origin._add(f1)._add(f2)._divideBy(2);\n\n                container.style.transformOrigin = container_origin.x + 'px ' + container_origin.y + 'px';\n\n                DOMEvent.on(document, 'touchmove', zoomMove);\n                DOMEvent.on(document, 'touchend', zoomEnd);\n            }\n\n            function removeZoomEvent () {\n                DOMEvent.off(document, 'touchmove', zoomMove);\n                DOMEvent.off(document, 'touchend', zoomEnd);\n            }\n\n            function zoomMove (e) {\n                // css resize\n                var positions = getFingerPositions(e),\n                    f1 = positions[0],\n                    f2 = positions[1],\n                    zc = f1.add(f2).divideBy(2);\n\n                zoom_center_diff = zc.subtract(container_origin);\n                \n                zoom_scale = f1.distanceTo(f2) / zoom_distance;\n\n                // scale (impacted by origin in zoomStart)\n                container.style.transform = 'scale(' + zoom_scale + ')';\n\n                // translate\n                container.style.left = zoom_center_diff.x + 'px';\n                container.style.top = zoom_center_diff.y + 'px';\n               \n                e.preventDefault();\n            }\n\n            function zoomEnd () {\n\n                // get new offset for canvas to figure out\n                container_scale *= zoom_scale;\n                container_offset = container_origin.multiplyBy(1 - container_scale);\n\n                container.setAttribute('style', '');\n\n                // reposition by zoom_center_diff\n                TypeWriter.reposition( zoom_center_diff );\n\n                removeZoomEvent();\n            }*/\n        }\n\n        return new App();\n    })();\n\n/*\n*\n* Vector class for handling positions\n*\n*/\n\nfunction Vector (x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nVector.prototype.get = function (axis) {\n    return this[axis];\n};\n\nVector.prototype.add = function (vector) {\n    if (typeof(vector) === 'number') {\n        return new Vector(this.x + vector, this.y + vector);\n    }\n    return new Vector(this.x + vector.x, this.y + vector.y);\n};\n\nVector.prototype._add = function (vector) {\n    this.x += (vector.x === undefined) ? vector : vector.x;\n    this.y += (vector.y === undefined) ? vector : vector.y;\n    return this;\n};\n\nVector.prototype.subtract = function (vector) {\n    if (typeof(vector) === 'number') {\n        return new Vector(this.x - vector, this.y - vector);\n    }\n    return new Vector(this.x - vector.x, this.y - vector.y);\n};\n\nVector.prototype._subtract = function (vector) {\n    this.x -= (vector.x === undefined) ? vector : vector.x;\n    this.y -= (vector.y === undefined) ? vector : vector.y;\n    return this;\n};\n\nVector.prototype.divideBy = function (num) {\n    return new Vector(this.x / num, this.y / num);\n};\n\nVector.prototype._divideBy = function (num) {\n    this.x /= num;\n    this.y /= num;\n    return this;\n};\n\nVector.prototype.multiplyBy = function (num) {\n    return new Vector(this.x * num, this.y * num);\n};\n\nVector.prototype._multiplyBy = function (num) {\n    this.x *= num;\n    this.y *= num;\n    return this;\n};\n\nVector.prototype.distanceTo = function (vector) {\n    var diff = vector.subtract(this),\n        x = diff.x,\n        y = diff.y;\n    return Math.sqrt(x * x + y * y);\n};\n\n/*\n*\n* Character class for drawing characters on TypeWriter singleton\n*\n*/\nfunction Character (char_str, _x, _y) {\n    var x = randMargin(_x || pos_vec.x, TRANSLATE_MARGIN),\n        y = randMargin(_y || pos_vec.y, TRANSLATE_MARGIN);\n\n    this.str = char_str;\n    this.rotate = randMargin(0, ROTATE_MARGIN);\n    this.alpha = randMargin(GLOBAL_ALPHA, ALPHA_MARGIN);\n    \n    // save vector position\n    Vector.call(this, x, y);\n\n    // save inverse of current typewriter offsets\n    // useful for applying future changing offsets\n    // in redraw functions\n    this._subtract( canvas_offset.multiplyBy( container_scale ) )\n        ._subtract( container_offset );\n\n    this.draw();\n}\n\nCharacter.prototype = Object.create( Vector.prototype );\n\nCharacter.prototype.draw = function () {\n    // apply current typewriter offsets\n    var vec = this.add( canvas_offset.divideBy(container_scale) );\n\n    textCtx.save();\n    if (container_scale !== 1) {\n        textCtx.translate(container_offset.x, container_offset.y);\n        textCtx.scale(container_scale, container_scale);\n    }\n    textCtx.translate(vec.x, vec.y);\n    textCtx.rotate( this.rotate );\n    textCtx.globalAlpha = this.alpha;\n    textCtx.fillText(this.str, 0, 0);\n    textCtx.restore();\n};\n\nDOMEvent.on(window, 'resize', function () {\n    TypeWriter.reposition();\n});\n\n/*\n*\n* mobile app listener \n*\n*/\n\nDOMEvent.on(document, 'deviceready', function(){\n\n    // vibrate gives option to clear typewriter\n    shake.startWatch(function () {\n\n        if (!App.running) return;\n\n        navigator.notification.confirm(\"Do you want to clear the canvas?\", function (button) {\n            if (button === 1) {\n                TypeWriter.reset();\n            }\n        });\n\n    });\n\n}, false);\n\n/*\n*\n* basic app handlers\n*\n*/\nDOMEvent.on(window, 'hashchange', function () {\n    var hash = window.location.hash;\n    if (!hash || hash === '#') {\n        // splash screen\n        sendEvent('button', 'backToSplash');\n        App.stop();\n    } else if (hash === '#typing') {\n        // start typing\n        sendEvent('button', 'startTyping');\n        App.start();\n    } else if (hash === '#paste') {\n        // paste text\n        sendEvent('button', 'pasteText');\n        pasteText();\n    }\n});\n\n// onload wipe hash?\nDOMEvent.on(window, 'load', function () {\n    if (window.location.hash) {\n        window.location.hash = '';\n    }\n});\n\nvar pasteText = (function () {\n    /*\n\n    form submit handler to start secondary \n    function of pasting text to appear simulated\n\n    */\n    var section2 = document.getElementById('splash-section-2'),\n        section3 = document.getElementById('splash-section-3'),\n        paste_cancel = document.getElementById('paste-cancel'),\n        form = document.pastetext;\n\n    // add event handler once\n    DOMEvent.on(form, 'submit', function (e) {\n        var text = form.pasted.value,\n            lines = [];\n        e.preventDefault();\n\n        if (text) {\n            sendEvent('action', 'Submitted text');\n            // begin app\n            App.start();\n\n            // add each line\n            lines = text.split(/\\n/);\n\n            for (var i = 0, len = lines.length; i < len; i++) {\n                var item = lines[i];\n                // paste text\n                TypeWriter.addCharacter(item);\n                // new line\n                Cursor.newline();\n            }\n        }\n    });\n\n    App.splash_events.push(function () {\n        // empty textarea\n        form.pasted.value = '';\n        // retoggle section visibility\n        section2.classList.remove('hidden');\n        section3.classList.add('hidden');\n    });\n\n    DOMEvent.on(paste_cancel, 'click', function () {\n        App.splash();\n    });\n\n    return function pasteText () {\n        // hide section 2 action buttons\n        section2.classList.add('hidden');\n        // show section 3 textbox\n        section3.classList.remove('hidden');\n\n        form.pasted.focus();\n    };\n})();\n\n/*\n*\n* some miscellaneous functions\n*\n*/\n\nfunction sendEvent() {\n    var args = Array.prototype.slice.call( arguments );\n\n    console.log( args );\n\n    // send to Google\n    window.ga.apply(this, ['send','event'].concat( args ));\n}\n\nfunction forceSpace () {\n    // firefox allows navigation within input\n    // this forces cursor to the end\n    this.value = '';\n    this.value = ' ';\n}\n\nfunction getPositionFromEvent (e) {\n    var touch = e.touches && e.touches[0] || {},\n        _x = e.clientX || touch.clientX || pos_vec.x,\n        _y = e.clientY || touch.clientY || pos_vec.y;\n    return new Vector(_x, _y);\n}\n\n/*\n*\n* helper functions\n*\n*/\nfunction makeMultiAudio (src, instances) {\n    var output = [],\n        current = 0,\n        num = instances || 5,\n        Audio = window.Audio || function () {};\n    for (var i = 0; i < num; i++) {\n        output.push(new Audio(src));\n    }\n    this.play = function () {\n        var audio = output[current++ % num];\n        audio.currentTime = 0;\n        audio.play();\n    };\n}\n\nfunction randRange (min, max) {\n    var value = (Math.random() * (max - min)) + min;\n    return value;\n}\n\nfunction randMargin (num, margin) {\n    return randRange(num - margin, num + margin);\n}\n\nfunction asyncForLoop (arr, process_fn, cb_fn) {\n    // Copyright 2009 Nicholas C. Zakas. All rights reserved.\n    // MIT Licensed\n    // http://www.nczonline.net/blog/2009/08/11/timed-array-processing-in-javascript/\n    \n    var i = 0,\n        len = arr.length,\n        loop_finished = cb_fn || function () {};\n\n    if (!len) {\n        loop_finished();\n        return;\n    }\n\n    window.setTimeout(function () {\n        var start = +new Date();\n        do {\n            process_fn.call(this, arr[i], i);\n        } while (++i < len && (+new Date() - start < 50));\n\n        if (i < len) {\n            // call next item\n            window.setTimeout(arguments.callee, 25);\n        } else {\n            loop_finished();\n        }\n    }, 25);\n}"]}